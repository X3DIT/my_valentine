<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>will you be my valentine?</title>
    <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #fcdde5;
            /* Soft pink background */
            font-family: 'Varela Round', sans-serif;
            overflow: hidden;
            user-select: none;
            transition: background-color 0.8s ease;
            /* Smooth color shift on success */
        }

        html {
            overflow: hidden;
            width: 100%;
            height: 100%;
        }

        .card {
            background: rgba(255, 255, 255, 0.9);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
            text-align: center;
            max-width: 90%;
            width: 600px;
            min-height: 400px;
            display: none;
            /* Hidden by default, shown after name input */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 5;
            transition: opacity 0.5s ease, transform 0.5s ease;
            overflow: hidden;
            /* Prevent moving button from pushing boundaries */
        }

        .name-overlay {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
            text-align: center;
            z-index: 100;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            transition: opacity 0.5s ease;
        }

        .name-input {
            padding: 12px 20px;
            border: 2px solid #ffc0cb;
            border-radius: 10px;
            font-family: 'Varela Round', sans-serif;
            font-size: 18px;
            outline: none;
            width: 250px;
            text-align: center;
        }

        .name-input:focus {
            border-color: #e91e63;
        }

        .btn-ok {
            background-color: #e91e63;
            color: white;
            padding: 10px 40px;
            border: none;
            border-radius: 50px;
            font-family: 'Varela Round', sans-serif;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-ok:hover {
            background-color: #d81b60;
            transform: scale(1.05);
        }

        .cat-img {
            width: 300px;
            height: 300px;
            object-fit: contain;
            margin-bottom: 20px;
            border-radius: 15px;
            /* Instant switch per request, but preloaded via JS */
        }

        h1 {
            color: #333;
            font-size: 26px;
            margin-bottom: 30px;
            margin-top: 10px;
            font-weight: bold;
            line-height: 1.4;
        }

        .buttons {
            display: flex;
            gap: 20px;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 60px;
        }

        .btn {
            padding: 12px 35px;
            border: none;
            border-radius: 50px;
            font-family: 'Varela Round', sans-serif;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-yes {
            background-color: #e91e63;
            color: white;
            box-shadow: 0 4px 10px rgba(233, 30, 99, 0.3);
        }

        .btn-yes:hover {
            background-color: #d81b60;
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(233, 30, 99, 0.4);
        }

        .btn-no {
            background-color: #e91e63;
            color: white;
            box-shadow: 0 4px 10px rgba(233, 30, 99, 0.3);
            border: none;
            border-radius: 50px;
            font-family: 'Varela Round', sans-serif;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            padding: 12px 35px;
            position: relative;
            z-index: 10;
        }

        .btn-no:hover {
            background-color: #d81b60;
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(233, 30, 99, 0.4);
        }

        .shy-text {
            margin-top: 25px;
            font-size: 14px;
            color: #aaa;
            opacity: 0;
            transition: opacity 0.5s ease;
            font-style: italic;
            min-height: 20px;
        }

        /* Particle Background */
        .heart-particle {
            position: absolute;
            bottom: -50px;
            color: #e91e63;
            font-size: 20px;
            opacity: 0.5;
            z-index: 1;
            animation: floatUp var(--duration) linear forwards;
            pointer-events: none;
        }

        /* Mobile Responsiveness */
        @media (max-width: 600px) {
            .card {
                padding: 15px;
                width: 85%;
                min-height: 320px;
            }

            .cat-img {
                width: 200px;
                height: 200px;
            }

            h1 {
                font-size: 20px;
                margin-bottom: 20px;
            }

            .btn {
                padding: 10px 25px;
                font-size: 16px;
            }

            .buttons {
                gap: 10px;
            }
        }

        /* Explosion Particles */
        .heart-boom {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            color: #ff4081;
            font-size: 24px;
            animation: explode 1s ease-out forwards;
        }

        @keyframes explode {
            0% {
                transform: translate(0, 0) scale(1.5);
                opacity: 1;
            }

            100% {
                transform: translate(var(--tx), var(--ty)) scale(0);
                opacity: 0;
            }
        }

        @keyframes floatUp {
            0% {
                transform: translateY(0) rotate(0deg) translateX(0);
                opacity: 0;
            }

            10% {
                opacity: 0.5;
            }

            100% {
                transform: translateY(-110vh) rotate(360deg) translateX(var(--drift, 0));
                opacity: 0;
            }
        }
    </style>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function () {
            emailjs.init("1BVdMDMuRkslL1qea");
        })();
    </script>
</head>

<body>

    <div class="name-overlay" id="nameOverlay">
        <h1>what's your name? üíñ</h1>
        <input type="text" id="userNameInput" class="name-input" placeholder="Enter your name..." autocomplete="off">
        <button class="btn-ok" id="okBtn">OK</button>
    </div>

    <div class="card" id="mainCard">
        <img src="images/d59d68092758b835c09eb3f422ae8c20.jpg" alt="Cute Valentine" class="cat-img" id="main-img">
        <h1 id="question">muwthe.....will you be my valentine?</h1>

        <div class="buttons" id="btnGroup">
            <button class="btn btn-yes" id="yesBtn">Yes</button>
            <button class="btn btn-no" id="noBtn">No</button>
        </div>

        <div class="shy-text" id="shyText">"No" seemed a bit shy üôà</div>
    </div>

    <script>
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const question = document.getElementById('question');
        const mainImg = document.getElementById('main-img');
        const shyText = document.getElementById('shyText');
        const card = document.getElementById('mainCard');
        const btnGroup = document.getElementById('btnGroup');
        const nameOverlay = document.getElementById('nameOverlay');
        const userNameInput = document.getElementById('userNameInput');
        const okBtn = document.getElementById('okBtn');

        okBtn.addEventListener('click', () => {
            const name = userNameInput.value.trim();
            if (name) {
                question.innerText = `muwthe ${name}.....will you be my valentine?`;
                nameOverlay.style.opacity = '0';
                setTimeout(() => {
                    nameOverlay.style.display = 'none';
                    card.style.display = 'flex';
                    card.style.opacity = '0';
                    setTimeout(() => {
                        card.style.opacity = '1';
                    }, 50);
                }, 500);
            } else {
                userNameInput.style.borderColor = "red";
                setTimeout(() => { userNameInput.style.borderColor = "#ffc0cb"; }, 1000);
            }
        });

        // Particle logic
        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart-particle');
            heart.innerHTML = '‚ù§';
            heart.style.left = Math.random() * 100 + 'vw';

            const duration = 5 + Math.random() * 5;
            heart.style.setProperty('--duration', duration + 's');

            const size = 15 + Math.random() * 20;
            heart.style.fontSize = size + 'px';

            const drift = (Math.random() - 0.5) * 200;
            heart.style.setProperty('--drift', drift + 'px');

            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), duration * 1000);
        }

        setInterval(createHeart, 150);

        function createExplosion(x, y) {
            for (let i = 0; i < 50; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart-boom');
                heart.innerHTML = '‚ù§';
                heart.style.left = x + 'px';
                heart.style.top = y + 'px';

                const angle = Math.random() * Math.PI * 2;
                const distance = 100 + Math.random() * 600;
                const tx = Math.cos(angle) * distance;
                const ty = Math.sin(angle) * distance;

                heart.style.setProperty('--tx', tx + 'px');
                heart.style.setProperty('--ty', ty + 'px');

                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 1000);
            }
        }

        let moveCount = 0;
        let imgIndex = 0;

        const initialImg = "images/d59d68092758b835c09eb3f422ae8c20.jpg";
        const initialShyText = '"No" seemed a bit shy üôà';

        const valImages = [
            "images/274d5e2cd0866782feb03eac7ad30fc3.jpg",
            "images/73120289c59ca0790a2ed7312e241be5.jpg",
            "images/828e32ff9e231ac7e1c2ae2cc20bfe9f.jpg",
            "images/998901840d425e522d0bc47eb2ba6c85.jpg",
            "images/d1b209ce0dbda08cd0bf26a2bcd8ea2c.jpg",
            "images/d59d68092758b835c09eb3f422ae8c20.jpg",
            "images/f8f7e9d0c8b93702427661d7d93e957c.jpg",
            "images/bear-kiss-bear-kisses.gif"
        ];

        // Preload Images to prevent flickers during instant switches
        valImages.forEach(src => {
            const img = new Image();
            img.src = src;
        });

        const messages = [
            "Are you sure?", "Are you really sure?", "Are you really really sure?",
            "Think again!", "Don't you believe in second chances?", "Why are you being so stone-hearted?",
            "Maybe we can talk about it?", "I will not ask this again...", "Okay, now it is hurting me.",
            "Now you are just being mean.", "I am begging you to accept!", "Give me one chance?"
        ];

        function resetBtn() {
            noBtn.style.position = 'relative';
            noBtn.style.left = 'auto';
            noBtn.style.top = 'auto';
            shyText.innerHTML = initialShyText;
            shyText.style.opacity = '0';
            mainImg.src = initialImg;
            moveCount = 0;
            imgIndex = 0;
        }

        function moveButton() {
            moveCount++;
            imgIndex = (moveCount - 1) % valImages.length;
            mainImg.src = valImages[imgIndex];
            const msgIndex = (moveCount - 1) % messages.length;
            shyText.innerText = messages[msgIndex];
            shyText.style.opacity = '1';

            const cardRect = card.getBoundingClientRect();
            const btnRect = noBtn.getBoundingClientRect();
            const maxX = Math.max(0, cardRect.width - btnRect.width - 40);
            const maxY = Math.max(0, cardRect.height - btnRect.height - 40);
            const x = maxX > 20 ? 20 + Math.random() * (maxX - 20) : Math.random() * maxX;
            const y = maxY > 20 ? 20 + Math.random() * (maxY - 20) : Math.random() * maxY;

            noBtn.style.position = 'absolute';
            noBtn.style.left = `${x}px`;
            noBtn.style.top = `${y}px`;
        }

        card.addEventListener('mouseleave', () => resetBtn());
        noBtn.addEventListener('mouseover', moveButton);
        noBtn.addEventListener('click', moveButton);
        noBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            moveButton();
        });

        yesBtn.addEventListener('mouseover', resetBtn);

        yesBtn.addEventListener('click', (e) => {
            // 1. Capture the   Name and Date
            // We pull the name that was entered in the first overlay
            const visitorName = userNameInput.value.trim() || "Someone";
            const currentTime = new Date().toLocaleString('en-US', {
                weekday: 'long',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });

            // 2. Prepare the EmailJS Parameters
            const templateParams = {
                name: visitorName,
                time: currentTime,
                message: "YES! ‚ù§Ô∏è"
            };

            // 3. Send via EmailJS
            emailjs.send('service_sewt6b8', 'template_ezoqrqf', templateParams)
                .then(function (response) {
                    console.log('SUCCESS!', response.status, response.text);
                }, function (error) {
                    console.log('FAILED...', error);
                });

            // --- UI and Animation Logic ---
            createExplosion(e.clientX, e.clientY);
            card.style.opacity = '0';
            card.style.transform = 'scale(0.95)';

            setTimeout(() => {
                question.innerText = "YAY! i knew it! ‚ù§Ô∏è";
                mainImg.src = "images/bear-kiss-bear-kisses.gif";
                btnGroup.style.display = 'none';
                shyText.style.display = 'none';
                document.body.style.backgroundColor = "#ffc0cb";
                card.style.opacity = '1';
                card.style.transform = 'scale(1)';
            }, 500);
        });
    </script>
</body>

</html>